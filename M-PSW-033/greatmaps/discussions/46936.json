[
  {
    "Id": "156991",
    "ThreadId": "46936",
    "Html": "Hi,<br>\r\nMay i suggest implementing a marker class with the following properties :<br>\r\n<br>\r\nType = enum&nbsp; Pin, Circle, Square, Triangle, Doughnut<br>\r\nSize = Point size<br>\r\nColor = System.Drawing.Color<br>\r\n<br>\r\nThis will allow for easy assortment of markers.&nbsp; The PIN type can just draw a circle with a filled in&nbsp;&nbsp; 'V'&nbsp; shape below, as per google's pins, the other types just simple shapes.<br>\r\nI know requests have been made for the extension of the 4 colors, but this method will allow the full spectrum of colors without additional coding for the developer.<br>\r\n<br>\r\nThanks.<br>\r\n",
    "PostedDate": "2009-02-12T05:19:45.703-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "156997",
    "ThreadId": "46936",
    "Html": "good ;}",
    "PostedDate": "2009-02-12T05:34:55.607-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "167986",
    "ThreadId": "46936",
    "Html": "for the WPF version, I've created a marker where you pass in a frameworkelement into the constructor, that way you can have any object as your marker (image, lists, usercontrols etc). It seems a better way to do it as no matter how many things you have in your enum, there's always going to someone who wants something different. I can send it up if anyones interested.<br>\r\n<br>\r\nNext thing to look at is getting polygons on the map so you can create boundry overlays...that starts monday...now it's time for bed!\r\n",
    "PostedDate": "2009-03-13T18:05:34.767-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "168643",
    "ThreadId": "46936",
    "Html": "Hi Moose<br>\r\n<br>\r\nplease send. I have some markers which need certain customizing. your solution seem like ... the solution.<br>\r\n<br>\r\nkr<br>\r\ngeorge\r\n",
    "PostedDate": "2009-03-16T10:54:17.677-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "168932",
    "ThreadId": "46936",
    "Html": "moosetaylor,&nbsp; the boundry overlays is something i'm very interested in.&nbsp; Does anyone know where / how i can get UK PostCode boundry info from so i can add these as an overlay too.<br>\r\nThanks,<br>\r\n<br>\r\n",
    "PostedDate": "2009-03-17T00:50:00.367-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "168940",
    "ThreadId": "46936",
    "Html": "Here's the code for the altered GMapMarker.cs<br>\r\nBelow that, I'll post the code for my custom Frameworkelement market GMapMarkerFrameworkElement.cs<br>\r\nNote: I added some dependencyproperties to GMapWindowsPresentation.cs to track current / focused markers, plus added an observablecollection of markers... here's the stubs for these properties:<br>\r\n<br>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#808080\">///</span><span style=\"font-size:13px;color:#008000\"> </span><span style=\"font-size:13px;color:#808080\">&lt;summary&gt;\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#808080\">///</span><span style=\"font-size:13px;color:#008000\"> The marker that currently has focus (right click etc)\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#808080\">///</span><span style=\"font-size:13px;color:#008000\"> </span><span style=\"font-size:13px;color:#808080\">&lt;/summary&gt;\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">GMapMarker</span><span style=\"font-size:13px\"> FocusedMarker\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">get</span><span style=\"font-size:13px\"> { </span><span style=\"font-size:13px;color:#0000ff\">return</span><span style=\"font-size:13px\"> (</span><span style=\"font-size:13px;color:#2b91af\">GMapMarker</span><span style=\"font-size:13px\">)GetValue(FocusedMarkerProperty); }\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">set</span><span style=\"font-size:13px\"> { SetValue(FocusedMarkerProperty, </span><span style=\"font-size:13px;color:#0000ff\">value</span><span style=\"font-size:13px\">); }\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#008000\">// Using a DependencyProperty as the backing store for FocusedMarker. This enables animation, styling, binding, etc...\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">static</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">readonly</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">DependencyProperty</span><span style=\"font-size:13px\"> FocusedMarkerProperty =\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">DependencyProperty</span><span style=\"font-size:13px\">.Register(</span><span style=\"font-size:13px;color:#a31515\">&quot;FocusedMarker&quot;</span><span style=\"font-size:13px\">, </span><span style=\"font-size:13px;color:#0000ff\">typeof</span><span style=\"font-size:13px\">(</span><span style=\"font-size:13px;color:#2b91af\">GMapMarker</span><span style=\"font-size:13px\">), </span><span style=\"font-size:13px;color:#0000ff\">typeof</span><span style=\"font-size:13px\">(</span><span style=\"font-size:13px;color:#2b91af\">GMap</span><span style=\"font-size:13px\">), </span><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">UIPropertyMetadata</span><span style=\"font-size:13px\">(</span><span style=\"font-size:13px;color:#0000ff\">null</span><span style=\"font-size:13px\">));\r\n<p>&nbsp;</p>\r\n<p> </p>\r\n<p> </p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#808080\">///</span><span style=\"font-size:13px;color:#008000\"> </span><span style=\"font-size:13px;color:#808080\">&lt;summary&gt;\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#808080\">///</span><span style=\"font-size:13px;color:#008000\"> The current Marker (when clicked etc)\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#808080\">///</span><span style=\"font-size:13px;color:#008000\"> </span><span style=\"font-size:13px;color:#808080\">&lt;/summary&gt;\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">GMapMarker</span><span style=\"font-size:13px\"> CurrentMarker\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">get</span><span style=\"font-size:13px\"> { </span><span style=\"font-size:13px;color:#0000ff\">return</span><span style=\"font-size:13px\"> (</span><span style=\"font-size:13px;color:#2b91af\">GMapMarker</span><span style=\"font-size:13px\">)GetValue(CurrentMarkerProperty); }\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">set</span><span style=\"font-size:13px\"> { SetValue(CurrentMarkerProperty, </span><span style=\"font-size:13px;color:#0000ff\">value</span><span style=\"font-size:13px\">); }\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#008000\">// Using a DependencyProperty as the backing store for CurrentMarker. This enables animation, styling, binding, etc...\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">static</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">readonly</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">DependencyProperty</span><span style=\"font-size:13px\"> CurrentMarkerProperty =\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">DependencyProperty</span><span style=\"font-size:13px\">.Register(</span><span style=\"font-size:13px;color:#a31515\">&quot;CurrentMarker&quot;</span><span style=\"font-size:13px\">, </span><span style=\"font-size:13px;color:#0000ff\">typeof</span><span style=\"font-size:13px\">(</span><span style=\"font-size:13px;color:#2b91af\">GMapMarker</span><span style=\"font-size:13px\">), </span><span style=\"font-size:13px;color:#0000ff\">typeof</span><span style=\"font-size:13px\">(</span><span style=\"font-size:13px;color:#2b91af\">GMap</span><span style=\"font-size:13px\">), </span><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">UIPropertyMetadata</span><span style=\"font-size:13px\">(</span><span style=\"font-size:13px;color:#0000ff\">null</span><span style=\"font-size:13px\">, </span><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">PropertyChangedCallback</span><span style=\"font-size:13px\">(OnCurrentMarkerChanged)));\r\n<p>&nbsp;</p>\r\n<p> </p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">private</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">static</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">void</span><span style=\"font-size:13px\"> OnCurrentMarkerChanged(</span><span style=\"font-size:13px;color:#2b91af\">DependencyObject</span><span style=\"font-size:13px\"> o, </span><span style=\"font-size:13px;color:#2b91af\">DependencyPropertyChangedEventArgs</span><span style=\"font-size:13px\"> e)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">GMap</span><span style=\"font-size:13px\"> map = o </span><span style=\"font-size:13px;color:#0000ff\">as</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">GMap</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">if</span><span style=\"font-size:13px\"> (map == </span><span style=\"font-size:13px;color:#0000ff\">null</span><span style=\"font-size:13px\">) </span><span style=\"font-size:13px;color:#0000ff\">return</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">GMapMarker</span><span style=\"font-size:13px\"> marker = e.NewValue </span><span style=\"font-size:13px;color:#0000ff\">as</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">GMapMarker</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">if</span><span style=\"font-size:13px\"> (marker == </span><span style=\"font-size:13px;color:#0000ff\">null</span><span style=\"font-size:13px\">) </span><span style=\"font-size:13px;color:#0000ff\">return</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">foreach</span><span style=\"font-size:13px\"> (</span><span style=\"font-size:13px;color:#2b91af\">GMapMarker</span><span style=\"font-size:13px\"> m </span><span style=\"font-size:13px;color:#0000ff\">in</span><span style=\"font-size:13px\"> map.MapMarkers)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>m.IsCurrentMarker = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">false</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>marker.IsCurrentMarker = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">true</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p> </p>\r\n<p> </p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">ObservableCollection</span><span style=\"font-size:13px\">&lt;</span><span style=\"font-size:13px;color:#2b91af\">GMapMarker</span><span style=\"font-size:13px\">&gt; MapMarkers\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">get</span><span style=\"font-size:13px\"> { </span><span style=\"font-size:13px;color:#0000ff\">return</span><span style=\"font-size:13px\"> (</span><span style=\"font-size:13px;color:#2b91af\">ObservableCollection</span><span style=\"font-size:13px\">&lt;</span><span style=\"font-size:13px;color:#2b91af\">GMapMarker</span><span style=\"font-size:13px\">&gt;)GetValue(MapMarkersProperty); }\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">set</span><span style=\"font-size:13px\"> { SetValue(MapMarkersProperty, </span><span style=\"font-size:13px;color:#0000ff\">value</span><span style=\"font-size:13px\">); }\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#008000\">// Using a DependencyProperty as the backing store for MapMarkers. This enables animation, styling, binding, etc...\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">static</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">readonly</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">DependencyProperty</span><span style=\"font-size:13px\"> MapMarkersProperty =\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">DependencyProperty</span><span style=\"font-size:13px\">.Register(</span><span style=\"font-size:13px;color:#a31515\">&quot;MapMarkers&quot;</span><span style=\"font-size:13px\">, </span><span style=\"font-size:13px;color:#0000ff\">typeof</span><span style=\"font-size:13px\">(</span><span style=\"font-size:13px;color:#2b91af\">ObservableCollection</span><span style=\"font-size:13px\">&lt;</span><span style=\"font-size:13px;color:#2b91af\">GMapMarker</span><span style=\"font-size:13px\">&gt;), </span><span style=\"font-size:13px;color:#0000ff\">typeof</span><span style=\"font-size:13px\">(</span><span style=\"font-size:13px;color:#2b91af\">GMap</span><span style=\"font-size:13px\">), </span><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">UIPropertyMetadata</span><span style=\"font-size:13px\">(</span><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">ObservableCollection</span><span style=\"font-size:13px\">&lt;</span><span style=\"font-size:13px;color:#2b91af\">GMapMarker</span><span style=\"font-size:13px\">&gt;()));\r\n<p>&nbsp;</p>\r\n</span></p>\r\n <br>\r\n<br>\r\n----------------------------------------------<br>\r\n-- GMapMarker.cs<br>\r\n----------------------------------------------<br>\r\n<span style=\"font-size:13px;color:#0000ff\"><span style=\"font-size:13px;color:#0000ff\">\r\n<p>using</p>\r\n</span>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px\"> System.Collections.Generic;\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px;color:#0000ff\"><span style=\"font-size:13px;color:#0000ff\">\r\n<p>using</p>\r\n</span>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px\"> System.Windows.Controls.Primitives;\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px;color:#0000ff\"><span style=\"font-size:13px;color:#0000ff\">\r\n<p>using</p>\r\n</span>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px\"> System.Windows.Input;\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px;color:#0000ff\"><span style=\"font-size:13px;color:#0000ff\">\r\n<p>using</p>\r\n</span>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px\"> System.Windows.Media;\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px;color:#0000ff\"><span style=\"font-size:13px;color:#0000ff\">\r\n<p>using</p>\r\n</span>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px\"> System.Windows.Shapes;\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px;color:#0000ff\"><span style=\"font-size:13px;color:#0000ff\">\r\n<p>using</p>\r\n</span>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px\"> GMapNET;\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px;color:#0000ff\"><span style=\"font-size:13px;color:#0000ff\">\r\n<p>namespace</p>\r\n</span>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px\"> System.Windows.Controls\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">abstract</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">class</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">GMapMarker</span><span style=\"font-size:13px\"> : </span><span style=\"font-size:13px;color:#2b91af\">MapObject\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">Boolean</span><span style=\"font-size:13px\"> IsCurrentMarker { </span><span style=\"font-size:13px;color:#0000ff\">get</span><span style=\"font-size:13px\">; </span><span style=\"font-size:13px;color:#0000ff\">set</span><span style=\"font-size:13px\">; }\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">TextBlock</span><span style=\"font-size:13px\"> TextBlock = </span><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">TextBlock</span><span style=\"font-size:13px\">();\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">readonly</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">Popup</span><span style=\"font-size:13px\"> Popup = </span><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">Popup</span><span style=\"font-size:13px\">();\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">readonly</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">Label</span><span style=\"font-size:13px\"> Label = </span><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">Label</span><span style=\"font-size:13px\">();\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">bool</span><span style=\"font-size:13px\"> ShowTooltip = </span><span style=\"font-size:13px;color:#0000ff\">true</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">private</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">ContextMenu</span><span style=\"font-size:13px\"> _contextMenu;\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">ContextMenu</span><span style=\"font-size:13px\"> ContextMenu\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">get\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#0000ff\">return</span><span style=\"font-size:13px\"> _contextMenu;\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">set\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>{</p>\r\n<p>_contextMenu = </p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#0000ff\">value</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">if</span><span style=\"font-size:13px\">(MarkerElement!=</span><span style=\"font-size:13px;color:#0000ff\">null</span><span style=\"font-size:13px\">)\r\n<p>&nbsp;</p>\r\n<p>MarkerElement.ContextMenu = _contextMenu;</p>\r\n<p>}</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">int</span><span style=\"font-size:13px\"> z;\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">string</span><span style=\"font-size:13px\"> Text\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">get\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#0000ff\">return</span><span style=\"font-size:13px\"> TextBlock.Text;\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">set\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>{</p>\r\n<p>TextBlock.Text = </p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#0000ff\">value</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">abstract</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">FrameworkElement</span><span style=\"font-size:13px\"> MarkerElement\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">get</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">GMap</span><span style=\"font-size:13px\"> Map;\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">readonly</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">Dictionary</span><span style=\"font-size:13px\">&lt;</span><span style=\"font-size:13px;color:#2b91af\">UIElement</span><span style=\"font-size:13px\">, </span><span style=\"font-size:13px;color:#2b91af\">Point</span><span style=\"font-size:13px\">&gt; Objects = </span><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">Dictionary</span><span style=\"font-size:13px\">&lt;</span><span style=\"font-size:13px;color:#2b91af\">UIElement</span><span style=\"font-size:13px\">, </span><span style=\"font-size:13px;color:#2b91af\">Point</span><span style=\"font-size:13px\">&gt;();\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">int</span><span style=\"font-size:13px\"> X\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">get\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#0000ff\">return</span><span style=\"font-size:13px\"> (</span><span style=\"font-size:13px;color:#0000ff\">int</span><span style=\"font-size:13px\">) </span><span style=\"font-size:13px;color:#2b91af\">Canvas</span><span style=\"font-size:13px\">.GetLeft(MarkerElement);\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">int</span><span style=\"font-size:13px\"> Y\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">get\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#0000ff\">return</span><span style=\"font-size:13px\"> (</span><span style=\"font-size:13px;color:#0000ff\">int</span><span style=\"font-size:13px\">) </span><span style=\"font-size:13px;color:#2b91af\">Canvas</span><span style=\"font-size:13px\">.GetTop(MarkerElement);\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> GMapMarker()\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>IsCurrentMarker = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">false</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>TextBlock.IsHitTestVisible = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">false</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>TextBlock.TextAlignment = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">TextAlignment</span><span style=\"font-size:13px\">.Center;\r\n<p>&nbsp;</p>\r\n<p>TextBlock.Foreground = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">Brushes</span><span style=\"font-size:13px\">.White;\r\n<p>&nbsp;</p>\r\n<p>TextBlock.FontSize = 12;</p>\r\n<p>TextBlock.FontWeight = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">FontWeights</span><span style=\"font-size:13px\">.Bold;\r\n<p>&nbsp;</p>\r\n<p>Text = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#a31515\">&quot;-&quot;</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#008000\">//Label.SetResourceReference(Label.StyleProperty, &quot;MarkerLabel&quot;);\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#008000\">//Label.Style = Application.Current.MainWindow.Resources[&quot;MarkerLabel&quot;] as Style;\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#008000\">////////Label.Foreground = Brushes.White;\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#008000\">////////Label.BorderBrush = Brushes.Black;\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#008000\">////////Label.BorderThickness = new Thickness(2);\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#008000\">////////Label.Padding = new Thickness(5);\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#008000\">////////Label.FontSize = 14;\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>Label.Content = </p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#a31515\">&quot;-&quot;</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>Popup.AllowsTransparency = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">true</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>Popup.Child = Label;</p>\r\n<p>Popup.Placement = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">PlacementMode</span><span style=\"font-size:13px\">.Mouse;\r\n<p>&nbsp;</p>\r\n<p> </p>\r\n<p>SetMarkerMouseEvents();</p>\r\n<p>SetShapeCenter();</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">void</span><span style=\"font-size:13px\"> SetMarkerMouseEvents()\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>MarkerElement.MouseEnter += </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">MouseEventHandler</span><span style=\"font-size:13px\">(MarkerElement_MouseEnter);\r\n<p>&nbsp;</p>\r\n<p>MarkerElement.MouseLeave += </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">MouseEventHandler</span><span style=\"font-size:13px\">(MarkerElement_MouseLeave);\r\n<p>&nbsp;</p>\r\n<p>MarkerElement.MouseWheel += </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">MouseWheelEventHandler</span><span style=\"font-size:13px\">(MarkerElement_MouseWheel);\r\n<p>&nbsp;</p>\r\n<p>MarkerElement.MouseDown += </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">MouseButtonEventHandler</span><span style=\"font-size:13px\">(MarkerElement_MouseDown);\r\n<p>&nbsp;</p>\r\n<p>MarkerElement.MouseUp += </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">MouseButtonEventHandler</span><span style=\"font-size:13px\">(MarkerElement_MouseUp);\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">void</span><span style=\"font-size:13px\"> MarkerElement_MouseUp(</span><span style=\"font-size:13px;color:#0000ff\">object</span><span style=\"font-size:13px\"> sender, </span><span style=\"font-size:13px;color:#2b91af\">MouseButtonEventArgs</span><span style=\"font-size:13px\"> e)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>IsCurrentMarker = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">false</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>Map.CurrentMarker = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">null</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">void</span><span style=\"font-size:13px\"> MarkerElement_MouseDown(</span><span style=\"font-size:13px;color:#0000ff\">object</span><span style=\"font-size:13px\"> sender, </span><span style=\"font-size:13px;color:#2b91af\">MouseButtonEventArgs</span><span style=\"font-size:13px\"> e)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">if</span><span style=\"font-size:13px\"> (e.ChangedButton == </span><span style=\"font-size:13px;color:#2b91af\">MouseButton</span><span style=\"font-size:13px\">.Left)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>IsCurrentMarker = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">true</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>Map.CurrentMarker = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">this</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>Map.FocusedMarker = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">this</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">if</span><span style=\"font-size:13px\"> (ShowTooltip)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>Popup.IsOpen = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">false</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">void</span><span style=\"font-size:13px\"> MarkerElement_MouseWheel(</span><span style=\"font-size:13px;color:#0000ff\">object</span><span style=\"font-size:13px\"> sender, </span><span style=\"font-size:13px;color:#2b91af\">MouseWheelEventArgs</span><span style=\"font-size:13px\"> e)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">if</span><span style=\"font-size:13px\">(MarkerElement.IsMouseDirectlyOver)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">if</span><span style=\"font-size:13px\">(e.Delta &gt; 0)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>MarkerElement.Width += 1;</p>\r\n<p>MarkerElement.Height += 1;</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">else\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>{</p>\r\n<p>MarkerElement.Width -= 1;</p>\r\n<p>MarkerElement.Height -= 1;</p>\r\n<p>}</p>\r\n<p>UpdateLocalPosition(Map);</p>\r\n<p>}</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#0000ff\">void</span><span style=\"font-size:13px\"> MarkerElement_MouseLeave(</span><span style=\"font-size:13px;color:#0000ff\">object</span><span style=\"font-size:13px\"> sender, </span><span style=\"font-size:13px;color:#2b91af\">MouseEventArgs</span><span style=\"font-size:13px\"> e)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">if</span><span style=\"font-size:13px\">(!IsCurrentMarker)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>MarkerElement.Cursor = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">Cursors</span><span style=\"font-size:13px\">.Arrow;\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">if</span><span style=\"font-size:13px\">(ShowTooltip)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>Popup.IsOpen = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">false</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">Canvas</span><span style=\"font-size:13px\">.SetZIndex(MarkerElement, z-1000);\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">Canvas</span><span style=\"font-size:13px\">.SetZIndex(TextBlock, z-1000);\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">void</span><span style=\"font-size:13px\"> MarkerElement_MouseEnter(</span><span style=\"font-size:13px;color:#0000ff\">object</span><span style=\"font-size:13px\"> sender, </span><span style=\"font-size:13px;color:#2b91af\">MouseEventArgs</span><span style=\"font-size:13px\"> e)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">if</span><span style=\"font-size:13px\"> (!IsCurrentMarker)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>z = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">Canvas</span><span style=\"font-size:13px\">.GetZIndex(MarkerElement);\r\n<p>&nbsp;</p>\r\n<p>MarkerElement.Cursor = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">Cursors</span><span style=\"font-size:13px\">.Hand;\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">if</span><span style=\"font-size:13px\">(ShowTooltip)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>Popup.IsOpen = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">true</span><span style=\"font-size:13px\">;\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">Canvas</span><span style=\"font-size:13px\">.SetZIndex(MarkerElement, z+1000);\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">Canvas</span><span style=\"font-size:13px\">.SetZIndex(TextBlock, z+1000);\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">abstract</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">void</span><span style=\"font-size:13px\"> SetShapeCenter();\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">void</span><span style=\"font-size:13px\"> UpdateLocalPosition(</span><span style=\"font-size:13px;color:#2b91af\">IGControl</span><span style=\"font-size:13px\"> map)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>SetShapeCenter();</p>\r\n<p>GMapNET.</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">Point</span><span style=\"font-size:13px\"> p = map.FromLatLngToLocal(Position);\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">foreach</span><span style=\"font-size:13px\">(</span><span style=\"font-size:13px;color:#2b91af\">KeyValuePair</span><span style=\"font-size:13px\">&lt;</span><span style=\"font-size:13px;color:#2b91af\">UIElement</span><span style=\"font-size:13px\">, </span><span style=\"font-size:13px;color:#2b91af\">Point</span><span style=\"font-size:13px\">&gt; e </span><span style=\"font-size:13px;color:#0000ff\">in</span><span style=\"font-size:13px\"> Objects)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>GMapNET.</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">Point</span><span style=\"font-size:13px\"> t = p;\r\n<p>&nbsp;</p>\r\n<p>t.Offset((</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">int</span><span style=\"font-size:13px\">) e.Value.X, (</span><span style=\"font-size:13px;color:#0000ff\">int</span><span style=\"font-size:13px\">) e.Value.Y);\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">Canvas</span><span style=\"font-size:13px\">.SetTop(e.Key, t.Y);\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#2b91af\">Canvas</span><span style=\"font-size:13px\">.SetLeft(e.Key, t.X);\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>}</p>\r\n<p>}</p>\r\n<p>}</p>\r\n</span></p>\r\n<br>\r\n<br>\r\n----------------------------------------------<br>\r\n-- Here's GMapMarkerFrameworkElement.cs<br>\r\n----------------------------------------------<br>\r\n<span style=\"font-size:13px;color:#0000ff\"><span style=\"font-size:13px;color:#0000ff\">\r\n<p>using</p>\r\n</span>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px\"> System.Windows.Input;\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px;color:#0000ff\"><span style=\"font-size:13px;color:#0000ff\">\r\n<p>using</p>\r\n</span>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px\"> System.Windows.Media;\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px;color:#0000ff\"><span style=\"font-size:13px;color:#0000ff\">\r\n<p>using</p>\r\n</span>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px\"> System.Windows.Shapes;\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px;color:#0000ff\"><span style=\"font-size:13px;color:#0000ff\">\r\n<p>namespace</p>\r\n</span>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px\"> System.Windows.Controls\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">class</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">GMapMarkerFrameworkElement</span><span style=\"font-size:13px\"> : </span><span style=\"font-size:13px;color:#2b91af\">GMapMarker\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#2b91af\">FrameworkElement</span><span style=\"font-size:13px\"> el = </span><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">FrameworkElement</span><span style=\"font-size:13px\">();\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">override</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">FrameworkElement</span><span style=\"font-size:13px\"> MarkerElement\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">get\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#0000ff\">return</span><span style=\"font-size:13px\"> el;\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> GMapMarkerFrameworkElement(</span><span style=\"font-size:13px;color:#2b91af\">GMap</span><span style=\"font-size:13px\"> Map, </span><span style=\"font-size:13px;color:#2b91af\">FrameworkElement</span><span style=\"font-size:13px\"> markerElement)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">this</span><span style=\"font-size:13px\">.Map = Map;\r\n<p>&nbsp;</p>\r\n<p>el = markerElement;</p>\r\n<p>el.Loaded += </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">RoutedEventHandler</span><span style=\"font-size:13px\">(el_Loaded);\r\n<p>&nbsp;</p>\r\n<p>el.MouseEnter += </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">MouseEventHandler</span><span style=\"font-size:13px\">(el_MouseEnter);\r\n<p>&nbsp;</p>\r\n<p>el.MouseLeave += </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">MouseEventHandler</span><span style=\"font-size:13px\">(el_MouseLeave);\r\n<p>&nbsp;</p>\r\n<p>el.MouseDown += </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">MouseButtonEventHandler</span><span style=\"font-size:13px\">(el_MouseDown);\r\n<p>&nbsp;</p>\r\n<p>el.MouseUp += </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">MouseButtonEventHandler</span><span style=\"font-size:13px\">(el_MouseUp);\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">base</span><span style=\"font-size:13px\">.SetMarkerMouseEvents();\r\n<p>&nbsp;</p>\r\n<p>SetShapeCenter();</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">void</span><span style=\"font-size:13px\"> el_Loaded(</span><span style=\"font-size:13px;color:#0000ff\">object</span><span style=\"font-size:13px\"> sender, </span><span style=\"font-size:13px;color:#2b91af\">RoutedEventArgs</span><span style=\"font-size:13px\"> e)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>UpdateLocalPosition(Map);</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n<p> </p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">public</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">override</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#0000ff\">void</span><span style=\"font-size:13px\"> SetShapeCenter()\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>Objects[MarkerElement] = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">Point</span><span style=\"font-size:13px\">(-el.ActualWidth / 2, -el.ActualHeight / 2);\r\n<p>&nbsp;</p>\r\n<p>TextBlock.Measure(</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">Size</span><span style=\"font-size:13px\">(</span><span style=\"font-size:13px;color:#2b91af\">Double</span><span style=\"font-size:13px\">.MaxValue, </span><span style=\"font-size:13px;color:#2b91af\">Double</span><span style=\"font-size:13px\">.MaxValue));\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">double</span><span style=\"font-size:13px\"> visualHeight = TextBlock.DesiredSize.Height;\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">double</span><span style=\"font-size:13px\"> visualWidth = TextBlock.DesiredSize.Width;\r\n<p>&nbsp;</p>\r\n<p>Objects[TextBlock] = </p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">new</span><span style=\"font-size:13px\"> </span><span style=\"font-size:13px;color:#2b91af\">Point</span><span style=\"font-size:13px\">(-visualWidth/2, -visualHeight/2);\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">void</span><span style=\"font-size:13px\"> el_MouseDown(</span><span style=\"font-size:13px;color:#0000ff\">object</span><span style=\"font-size:13px\"> sender, </span><span style=\"font-size:13px;color:#2b91af\">MouseButtonEventArgs</span><span style=\"font-size:13px\"> e)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>el.Opacity = 0.6d;</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">void</span><span style=\"font-size:13px\"> el_MouseUp(</span><span style=\"font-size:13px;color:#0000ff\">object</span><span style=\"font-size:13px\"> sender, </span><span style=\"font-size:13px;color:#2b91af\">MouseButtonEventArgs</span><span style=\"font-size:13px\"> e)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>el.Opacity = 1;</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">if</span><span style=\"font-size:13px\">(e.ChangedButton == </span><span style=\"font-size:13px;color:#2b91af\">MouseButton</span><span style=\"font-size:13px\">.Middle)\r\n<p>&nbsp;</p>\r\n<p>{ </p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">base</span><span style=\"font-size:13px\">.UpdateLocalPosition(Map);\r\n<p>&nbsp;</p>\r\n<p>}</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#0000ff\">void</span><span style=\"font-size:13px\"> el_MouseLeave(</span><span style=\"font-size:13px;color:#0000ff\">object</span><span style=\"font-size:13px\"> sender, </span><span style=\"font-size:13px;color:#2b91af\">MouseEventArgs</span><span style=\"font-size:13px\"> e)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#008000\">//\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n</span>\r\n<p><span style=\"font-size:13px;color:#0000ff\">void</span><span style=\"font-size:13px\"> el_MouseEnter(</span><span style=\"font-size:13px;color:#0000ff\">object</span><span style=\"font-size:13px\"> sender, </span><span style=\"font-size:13px;color:#2b91af\">MouseEventArgs</span><span style=\"font-size:13px\"> e)\r\n<p>&nbsp;</p>\r\n<p>{</p>\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<p><span style=\"font-size:13px;color:#008000\">//\r\n<p>&nbsp;</p>\r\n</span></p>\r\n<span style=\"font-size:13px\">\r\n<p>} </p>\r\n<p>}</p>\r\n<p>}</p>\r\n</span>\r\n",
    "PostedDate": "2009-03-17T01:32:10.913-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "415350",
    "ThreadId": "46936",
    "Html": "<p>Hi All,</p>\r\n<p>&nbsp; I need to add softmenu for&nbsp;GMAP markers,Can any one help me how to do it....</p>\r\n<p>Thanks in advance.</p>",
    "PostedDate": "2010-03-08T01:15:44.94-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]