[
  {
    "Id": "1054581",
    "ThreadId": "446486",
    "Html": "Hello boys,<br />\n I have a custom marker that show on video marker.tag like in this image<br />\n<img src=\"http://www.mimmolella.it/prova.png\" alt=\"Image\" /><br />\n<br />\nIf I upgrade the marker position and update the map everything ok but if I update the tag field of the marker my label on the screen is not updated. <br />\nDo you have any suggestions for me???<br />\n<br />\nThanks<br />\n",
    "PostedDate": "2013-06-09T10:59:07.803-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1054632",
    "ThreadId": "446486",
    "Html": "I have tried using this function, but the markers do not update.....<br />\n<pre><code> public void refreshmarker()\n        {\n             GMapMarkerRect[] marks = new GMapMarkerRect[gMapControl1.Overlays[0].Markers.Count];\n            for (int i = 0; i &lt; gMapControl1.Overlays[0].Markers.Count; i++)\n             {\n                 marks[i] = punti.Markers[i] as GMapMarkerRect;\n                 \n                 //textBox1.Text += &quot;Marks&quot; + marks[i].Tag.ToString()+Environment.NewLine;\n                 //textBox1.Text += &quot;Marks&quot; + marks[i].Tag.ToString() + Environment.NewLine;\n             }\n             punti.Markers.Clear();\n             \n             for (int i = 0; i &lt; marks.Length; i++)\n             {\n                 punti.Markers.Add(marks[i]);\n                 //textBox1.Text += &quot;Marks&quot; + punti.Markers[i].Tag.ToString() + Environment.NewLine;\n                 //marks[i] = punti.Markers[i] as GMapMarkerRect;\n                 //textBox1.Text += &quot;Marks&quot; + marks[i].Tag.ToString()+Environment.NewLine;   \n             }\n             \n             gMapControl1.Refresh();\n             \n        }</code></pre>\n\n",
    "PostedDate": "2013-06-09T14:23:48.277-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1054703",
    "ThreadId": "446486",
    "Html": "marker.YourText = &quot;new text&quot;;\r<br />\nmap.Invalidate();\r<br />\n// done<br />\n",
    "PostedDate": "2013-06-09T23:28:03.597-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1054723",
    "ThreadId": "446486",
    "Html": "Hello Radioman, after the changes if I read the text property of the tag it is correct but unfortunately also by invoking the invalidate method of the marker map is redrawn on the screen and always shows the old text.<br />\n<br />\nBefore<br />\n<img src=\"http://www.mimmolella.it/first.png\" alt=\"Image\" /><br />\n<br />\nAfter<br />\n<img src=\"http://www.mimmolella.it/then.png\" alt=\"Image\" /><br />\n<br />\n<br />\nMaybe I have to use a newer version.<br />\nI'm using the dlls of 17/10/2011! They go well?<br />\n<br />\nThanks again and congratulations for your work ....<br />\n<br />\nI enclose code of refresh and rendering  of marker<br />\nREFRESH<br />\n<pre><code> public void aggiornamarker(string nome, double Lat, double Lng,int altitudine,string descrizione, DateTime datetime, int id)\n        {\n            GMapMarkerRect marker = null;\n            marker = punti.Markers[id] as GMapMarkerRect;\n              marker.Position = new PointLatLng(Lat, Lng);\n               marker.Tag = nome;\n               marker.altitudine = altitudine;\n               marker.descrizione = descrizione;\n               marker.dataetempo = datetime;\n\n               gMapControl1.Invalidate();\n               gMapControl1.Refresh();\n            \n        }</code></pre>\n\nClass Marker<br />\n<pre><code>public class GMapMarkerRect : GMap.NET.WindowsForms.GMapMarker\n        {\n            #region Properties\n            Bitmap img = Properties.Resources.wp;\n            /// &lt;summary&gt;\n            /// The pen for the outer circle\n            /// &lt;/summary&gt;\n            public Pen OuterPen { get; set; }\n\n            /// &lt;summary&gt;\n            /// The brush for the inner circle\n            /// &lt;/summary&gt;\n            public Brush InnerBrush { get; set; }\n\n            /// &lt;summary&gt;\n            /// The brush for the Text\n            /// &lt;/summary&gt;\n            public Brush TextBrush { get; set; }\n\n            /// &lt;summary&gt;\n            /// The font for the text\n            /// &lt;/summary&gt;\n            public Font TextFont { get; set; }\n\n            /// &lt;summary&gt;\n            /// The text to display inside of the marker \n            /// &lt;/summary&gt;\n            public String Text { get; set; }\n\n            /// &lt;summary&gt;\n            /// The text to display inside of the marker \n            /// &lt;/summary&gt;\n            public String descrizione { get; set; }\n\n            /// &lt;summary&gt;\n            /// The text to display inside of the marker \n            /// &lt;/summary&gt;\n            public int altitudine { get; set; }\n\n            /// &lt;summary&gt;\n            /// The text to display inside of the marker \n            /// &lt;/summary&gt;\n            public DateTime dataetempo { get; set; }\n\n\n            private int diameter = 10;\n            /// &lt;summary&gt;\n            /// The size of the circle\n            /// &lt;/summary&gt;\n            public int CircleDiameter\n            {\n                get\n                {\n                    return this.diameter;\n                }\n                set\n                {\n                    diameter = value;\n                    this.Size = new System.Drawing.Size(diameter, diameter);\n                    Offset = new System.Drawing.Point(-Size.Width / 2, -Size.Height / 2);\n                }\n            }\n            #endregion\n\n            /// &lt;summary&gt;\n            /// Constructor\n            /// &lt;/summary&gt;\n            /// &lt;param name=&quot;outer&quot;&gt;The pen for the outer ring&lt;/param&gt;\n            /// &lt;param name=&quot;inner&quot;&gt;The brush for the inner circle.&lt;/param&gt;\n            /// &lt;param name=&quot;diameter&quot;&gt;The diameter in pixel of the whole circle&lt;/param&gt;\n            /// &lt;param name=&quot;text&quot;&gt;The text in the marker.&lt;/param&gt;\n            public GMapMarkerRect(PointLatLng p, Pen outer, Brush inner, int diam, String text)\n                : base(p)\n            {\n                \n                OuterPen = outer;\n                InnerBrush = inner;\n                CircleDiameter = diam;\n                //int width = (int)g.MeasureString(aString, control.Font).Width;\n                this.Text = text;\n                this.TextFont = new Font(&quot;Arial&quot;, 8);\n                this.TextBrush = Brushes.Black;\n                \n                Size = img.Size;\n                Offset = new System.Drawing.Point(-Size.Width / 2, -Size.Height / 2-1);\n                //Offset = new System.Drawing.Point(-Size.Width / 2, -Size.Height / 2);\n\n                \n                \n            }\n\n\n\n\n            /// &lt;summary&gt;\n            /// Render a circle\n            /// &lt;/summary&gt;\n            /// &lt;param name=&quot;g&quot;&gt;&lt;/param&gt;\n            public override void OnRender(Graphics g)\n            {\n\n                g.DrawImage(img, LocalPosition.X, LocalPosition.Y, Size.Width, Size.Height);\n                var textSizew = (int)g.MeasureString(Text, this.TextFont).Width;\n                var textSizeh = (int)g.MeasureString(Text, this.TextFont).Height;\n                Rectangle bordo = new Rectangle();\n                bordo.Width = textSizew+1;\n                bordo.Height = textSizeh+3;\n                bordo.X = LocalPosition.X -bordo.Width/2 + Size.Width/2 ;\n                bordo.Y = LocalPosition.Y-bordo.Height-1;\n               // MessageBox.Show(bordo.Width.ToString() + &quot; &quot; + bordo.Height.ToString() + &quot; &quot; + bordo.X.ToString() + &quot; &quot; + bordo.Y.ToString() + &quot; &quot; + Size.Height.ToString());\n                g.FillRectangle(InnerBrush, bordo);\n                g.DrawRectangle(OuterPen, bordo);\n                if (!String.IsNullOrEmpty(this.Text))\n                {\n                    SizeF sizeOfString = g.MeasureString(this.Text, this.TextFont);\n                    int x = (LocalPosition.X - bordo.Width / 2 + Size.Width / 2);\n                    int y = (LocalPosition.Y - bordo.Height);\n                    g.DrawString(this.Text, this.TextFont, this.TextBrush, x, y);\n                }\n                \n              \n            }\n            \n        }</code></pre>\n\n",
    "PostedDate": "2013-06-10T00:46:47.997-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1054800",
    "ThreadId": "446486",
    "Html": "i don't know about old versions, but it's working in the latest<br />\n",
    "PostedDate": "2013-06-10T04:47:26.657-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1054841",
    "ThreadId": "446486",
    "Html": "Sorry Radioman I made a big fat stupid mistake...<br />\nin refresh i change tag field of marker<br />\n<pre><code>public void aggiornamarker(string nome, double Lat, double Lng,int altitudine,string descrizione, DateTime datetime, int id)\n        {\n            GMapMarkerRect marker = null;\n            marker = punti.Markers[id] as GMapMarkerRect;\n              marker.Position = new PointLatLng(Lat, Lng);\n               ----------------------------------------\n               marker.Tag = nome;  //WRONG\n               marker.Text = nome; // RIGHT\n               ----------------------------------------\n               marker.altitudine = altitudine;\n               marker.descrizione = descrizione;\n               marker.dataetempo = datetime;\n\n               gMapControl1.Invalidate();\n               gMapControl1.Refresh();\n            \n        }</code></pre>\n\nbut in the class marker the text that I show on screen is in the Text field....... that nervousness<br />\n<pre><code>public class GMapMarkerRect : GMap.NET.WindowsForms.GMapMarker\n        {\n            #region Properties\n            Bitmap img = Properties.Resources.wp;\n            /// &lt;summary&gt;\n            /// The pen for the outer circle\n            /// &lt;/summary&gt;\n            public Pen OuterPen { get; set; }\n\n            /// &lt;summary&gt;\n            /// The brush for the inner circle\n            /// &lt;/summary&gt;\n            public Brush InnerBrush { get; set; }\n\n            /// &lt;summary&gt;\n            /// The brush for the Text\n            /// &lt;/summary&gt;\n            public Brush TextBrush { get; set; }\n\n            /// &lt;summary&gt;\n            /// The font for the text\n            /// &lt;/summary&gt;\n            public Font TextFont { get; set; }\n            \n            -----------------------------------------------------------------------------\n            /// &lt;summary&gt;\n            /// The text to display inside of the marker \n            /// &lt;/summary&gt;\n            public String Text { get; set; }\n            -----------------------------------------------------------------------------\n \n            /// &lt;summary&gt;\n            /// The text to display inside of the marker \n            /// &lt;/summary&gt;\n            public String descrizione { get; set; }\n\n            /// &lt;summary&gt;\n            /// The text to display inside of the marker \n            /// &lt;/summary&gt;\n            public int altitudine { get; set; }\n\n            /// &lt;summary&gt;\n            /// The text to display inside of the marker \n            /// &lt;/summary&gt;\n            public DateTime dataetempo { get; set; }\n\n\n            private int diameter = 10;\n            /// &lt;summary&gt;\n            /// The size of the circle\n            /// &lt;/summary&gt;\n            public int CircleDiameter\n            {\n                get\n                {\n                    return this.diameter;\n                }\n                set\n                {\n                    diameter = value;\n                    this.Size = new System.Drawing.Size(diameter, diameter);\n                    Offset = new System.Drawing.Point(-Size.Width / 2, -Size.Height / 2);\n                }\n            }\n            #endregion\n\n            /// &lt;summary&gt;\n            /// Constructor\n            /// &lt;/summary&gt;\n            /// &lt;param name=&quot;outer&quot;&gt;The pen for the outer ring&lt;/param&gt;\n            /// &lt;param name=&quot;inner&quot;&gt;The brush for the inner circle.&lt;/param&gt;\n            /// &lt;param name=&quot;diameter&quot;&gt;The diameter in pixel of the whole circle&lt;/param&gt;\n            /// &lt;param name=&quot;text&quot;&gt;The text in the marker.&lt;/param&gt;\n            public GMapMarkerRect(PointLatLng p, Pen outer, Brush inner, int diam, String text)\n                : base(p)\n            {\n                \n                OuterPen = outer;\n                InnerBrush = inner;\n                CircleDiameter = diam;\n                //int width = (int)g.MeasureString(aString, control.Font).Width;\n                this.Text = text;\n                this.TextFont = new Font(&quot;Arial&quot;, 8);\n                this.TextBrush = Brushes.Black;\n                \n                Size = img.Size;\n                Offset = new System.Drawing.Point(-Size.Width / 2, -Size.Height / 2-1);\n                //Offset = new System.Drawing.Point(-Size.Width / 2, -Size.Height / 2);\n\n                \n                \n            }\n\n\n\n\n            /// &lt;summary&gt;\n            /// Render a circle\n            /// &lt;/summary&gt;\n            /// &lt;param name=&quot;g&quot;&gt;&lt;/param&gt;\n            public override void OnRender(Graphics g)\n            {\n\n                g.DrawImage(img, LocalPosition.X, LocalPosition.Y, Size.Width, Size.Height);\n                var textSizew = (int)g.MeasureString(Text, this.TextFont).Width;\n                var textSizeh = (int)g.MeasureString(Text, this.TextFont).Height;\n                Rectangle bordo = new Rectangle();\n                bordo.Width = textSizew+1;\n                bordo.Height = textSizeh+3;\n                bordo.X = LocalPosition.X -bordo.Width/2 + Size.Width/2 ;\n                bordo.Y = LocalPosition.Y-bordo.Height-1;\n               // MessageBox.Show(bordo.Width.ToString() + &quot; &quot; + bordo.Height.ToString() + &quot; &quot; + bordo.X.ToString() + &quot; &quot; + bordo.Y.ToString() + &quot; &quot; + Size.Height.ToString());\n                g.FillRectangle(InnerBrush, bordo);\n                g.DrawRectangle(OuterPen, bordo);\n                if (!String.IsNullOrEmpty(this.Text))\n                {\n                    SizeF sizeOfString = g.MeasureString(this.Text, this.TextFont);\n                    int x = (LocalPosition.X - bordo.Width / 2 + Size.Width / 2);\n                    int y = (LocalPosition.Y - bordo.Height);\n                    g.DrawString(this.Text, this.TextFont, this.TextBrush, x, y);\n                }\n                \n              \n            }\n            \n        }</code></pre>\n\nThanks Again now it is perfect :))))<br />\n",
    "PostedDate": "2013-06-10T06:20:38.54-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1054842",
    "ThreadId": "446486",
    "Html": ";}<br />\n",
    "PostedDate": "2013-06-10T06:22:21.037-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1069184",
    "ThreadId": "446486",
    "Html": "Hi Radioman,<br />\n<br />\nDo you know why the program goes to the 'public override void OnRender(Graphics g)'  sometime 5 time after an OnMapZoomChanged event?<br />\nIt dose only once when I first open the form.<br />\n<br />\nCan it be avoided?<br />\n<br />\nMany Thanks,<br />\n<br />\nJeno<br />\n",
    "PostedDate": "2013-07-16T13:17:10.477-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1069525",
    "ThreadId": "446486",
    "Html": "zooming load tiles, tile loaded -&gt; refresh<br />\n",
    "PostedDate": "2013-07-17T06:50:40.297-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]