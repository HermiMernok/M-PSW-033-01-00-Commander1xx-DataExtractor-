[
  {
    "Id": "254777",
    "ThreadId": "74475",
    "Html": "<p>I try to draw mark in a static map image from a coordinates.</p>\r\n<p>&nbsp;</p>\r\n<p>But the conversion from the coordinates to pixel is not successful.</p>\r\n<p>in the bg_DoWork method of the StaticImage form, I add this:</p>\r\n<p>using (Graphics gfx = Graphics.FromImage(bmpDestination))<br>{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gfx.InterpolationMode = InterpolationMode.HighQualityBicubic;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GMap.NET.Point point = info.Projection.FromLatLngToPixel(customMark.Position, info.Zoom);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gfx.DrawIcon(icon1, point.X, point.Y);</p>\r\n<p>}</p>\r\n<p>&nbsp;</p>\r\n<p>but this dont work</p>\r\n<p>I know the coordinates of the custom mark are in the rectangle of the map.</p>\r\n<p>&nbsp;</p>\r\n<p>what is wrong?</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2009-11-08T10:06:51.587-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "254793",
    "ThreadId": "74475",
    "Html": "<p>try MainMap.FromLocaltoLatLng</p>",
    "PostedDate": "2009-11-08T10:55:25.977-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "254860",
    "ThreadId": "74475",
    "Html": "<p>does not work. neither FromLatLngToLocal method</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2009-11-08T18:19:02.553-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "254973",
    "ThreadId": "74475",
    "Html": "<p>well it's complicated, what do you want exactly?</p>",
    "PostedDate": "2009-11-09T02:22:11.87-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "256886",
    "ThreadId": "74475",
    "Html": "<p>&nbsp;</p>\r\n<p>is work! i do this</p>\r\n<p>in the&nbsp;bg_DoWork method of the StaticImage form</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre><span style=\"color:Blue\">using</span> (Graphics gfx = Graphics.FromImage(bmpDestination))\r\n\r\n{\r\n\r\n&nbsp;&nbsp; gfx.InterpolationMode = InterpolationMode.HighQualityBicubic;\r\n\r\n&nbsp;&nbsp; IntPtr iconHandle2 = Properties.Resources.marker99.GetHicon();\r\n\r\n&nbsp;&nbsp; Icon icon2 = Icon.FromHandle(iconHandle2);\r\n\r\n&nbsp;&nbsp; <span style=\"color:Blue\">foreach</span> (<span style=\"color:Blue\">var</span> marker <span style=\"color:Blue\">in</span> info.Markers)\r\n\r\n&nbsp;&nbsp; {\r\n\r\n\t &nbsp; <span style=\"color:Blue\">if</span> (marker.GetType() == <span style=\"color:Blue\">typeof</span>(GMapMarkerCustom))\r\n\r\n\t &nbsp; {\r\n\r\n\t\t &nbsp; GMapMarkerCustom customMark = (GMapMarkerCustom)marker;\r\n\r\n\t\t &nbsp; IntPtr iconHandle1 = Properties.Resources.legendIcon.GetHicon();\r\n\r\n\t\t &nbsp; Icon icon1 = Icon.FromHandle(iconHandle1);\r\n\r\n\t\t &nbsp;&nbsp;\r\n\r\n\t\t &nbsp; <span style=\"color:Blue\">int</span> x, y = 0;\r\n\r\n\t\t &nbsp; FromLatLngToLocal(info, rect.Height, rect.Width, customMark.Position.Lat, customMark.Position.Lng, <span style=\"color:Blue\">out</span> x, <span style=\"color:Blue\">out</span> y);\r\n\r\n\r\n\r\n\t\t &nbsp; gfx.DrawIcon(icon1, x, y);\r\n\r\n\t\t &nbsp; gfx.DrawString(marker.Tag.ToString(), SystemFonts.DefaultFont, Brushes.Red, x + 10, y - 10);\r\n\r\n\t &nbsp; }\r\n\r\n\r\n\r\n\t &nbsp; <span style=\"color:Blue\">if</span> (marker.GetType() == <span style=\"color:Blue\">typeof</span>(GMapMarkerPolygon))\r\n\r\n\t &nbsp; {\r\n\r\n\t\t &nbsp; GMapMarkerPolygon customMark = (GMapMarkerPolygon)marker;\r\n\r\n\r\n\r\n\r\n\r\n\t\t &nbsp; List&lt;System.Drawing.Point&gt; points = <span style=\"color:Blue\">new</span> List&lt;System.Drawing.Point&gt;();\r\n\r\n\t\t &nbsp; <span style=\"color:Blue\">foreach</span> (<span style=\"color:Blue\">var</span> gPoint <span style=\"color:Blue\">in</span> customMark.GeoPoints)\r\n\r\n\t\t &nbsp; {\r\n\r\n\t\t\t &nbsp; <span style=\"color:Blue\">int</span> x, y = 0;\r\n\r\n\t\t\t &nbsp; FromLatLngToLocal(info, rect.Height, rect.Width, gPoint.Lat, gPoint.Lng, <span style=\"color:Blue\">out</span> x, <span style=\"color:Blue\">out</span> y);\r\n\r\n\t\t\t &nbsp; points.Add(<span style=\"color:Blue\">new</span> System.Drawing.Point(x, y));\r\n\r\n\t\t &nbsp; }\r\n\r\n\t\t &nbsp; Pen pen = <span style=\"color:Blue\">new</span> Pen(Color.Blue, 4);\r\n\r\n\t\t &nbsp; pen.DashStyle = DashStyle.DashDotDot;\r\n\r\n\r\n\r\n\t\t &nbsp; gfx.DrawPolygon(pen, points.ToArray());\r\n\r\n\t &nbsp; }\r\n\r\n&nbsp;&nbsp; }\r\n\r\n}\r\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p>and:</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre><span style=\"color:Blue\">private</span> <span style=\"color:Blue\">void</span> FromLatLngToLocal(MapInfo info, <span style=\"color:Blue\">int</span> imageHeigth, <span style=\"color:Blue\">int</span> imageWidth, <span style=\"color:Blue\">double</span> lat, <span style=\"color:Blue\">double</span> lng, <span style=\"color:Blue\">out</span> <span style=\"color:Blue\">int</span> x, <span style=\"color:Blue\">out</span> <span style=\"color:Blue\">int</span> y)\r\n\r\n{\r\n\r\n\t<span style=\"color:Green\">//</span>\r\n\r\n\t<span style=\"color:Blue\">double</span> heigthLat = lat - info.Area.LocationRightBottom.Lat;\r\n\r\n\t<span style=\"color:Blue\">double</span> widthLng = lng - info.Area.LocationTopLeft.Lng;\r\n\r\n\r\n\r\n\ty = Convert.ToInt32((heigthLat * imageHeigth) / info.Area.HeightLat);\r\n\r\n\tx = Convert.ToInt32((widthLng * imageWidth) / info.Area.WidthLng);\r\n\r\n\r\n\r\n\ty = imageHeigth - y;\r\n\r\n\r\n\r\n\t<span style=\"color:Green\">//calculo un 1% del tama&ntilde;o de la im&aacute;gen</span>\r\n\r\n\t<span style=\"color:Blue\">int</span> heigthPer = Convert.ToInt32(imageHeigth * 0.01);\r\n\r\n\t<span style=\"color:Blue\">int</span> widthPer = Convert.ToInt32(imageWidth * 0.01);\r\n\r\n\t<span style=\"color:Green\">//le sumo un 1%</span>\r\n\r\n\ty = y + heigthPer;\r\n\r\n\tx = x + heigthPer;\r\n\r\n}\r\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">using (Graphics gfx = Graphics.FromImage(bmpDestination))</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">{</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; gfx.InterpolationMode = InterpolationMode.HighQualityBicubic;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; IntPtr iconHandle2 = Properties.Resources.marker99.GetHicon();</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; Icon icon2 = Icon.FromHandle(iconHandle2);</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; foreach (var marker in info.Markers)</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; {</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; if (marker.GetType() == typeof(GMapMarkerCustom))</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; {</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; GMapMarkerCustom customMark = (GMapMarkerCustom)marker;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; IntPtr iconHandle1 = Properties.Resources.legendIcon.GetHicon();</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; Icon icon1 = Icon.FromHandle(iconHandle1);</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp;&nbsp;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; int x, y = 0;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; FromLatLngToLocal(info, rect.Height, rect.Width, customMark.Position.Lat, customMark.Position.Lng, out x, out y);</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; gfx.DrawIcon(icon1, x, y);</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; gfx.DrawString(marker.Tag.ToString(), SystemFonts.DefaultFont, Brushes.Red, x + 10, y - 10);</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; }</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; if (marker.GetType() == typeof(GMapMarkerPolygon))</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; {</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; GMapMarkerPolygon customMark = (GMapMarkerPolygon)marker;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; List&lt;System.Drawing.Point&gt; points = new List&lt;System.Drawing.Point&gt;();</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; foreach (var gPoint in customMark.GeoPoints)</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; {</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; int x, y = 0;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; FromLatLngToLocal(info, rect.Height, rect.Width, gPoint.Lat, gPoint.Lng, out x, out y);</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; points.Add(new System.Drawing.Point(x, y));</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; }</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; Pen pen = new Pen(Color.Blue, 4);</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; pen.DashStyle = DashStyle.DashDotDot;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; gfx.DrawPolygon(pen, points.ToArray());</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span> &nbsp; }</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">&nbsp;&nbsp; }</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">}</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">private void FromLatLngToLocal(MapInfo info, int imageHeigth, int imageWidth, double lat, double lng, out int x, out int y)</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">{</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span>//</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span>double heigthLat = lat - info.Area.LocationRightBottom.Lat;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span>double widthLng = lng - info.Area.LocationTopLeft.Lng;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span>y = Convert.ToInt32((heigthLat * imageHeigth) / info.Area.HeightLat);</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span>x = Convert.ToInt32((widthLng * imageWidth) / info.Area.WidthLng);</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span>y = imageHeigth - y;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span>//calculo un 1% del tama&ntilde;o de la im&aacute;gen</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span>int heigthPer = Convert.ToInt32(imageHeigth * 0.01);</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span>int widthPer = Convert.ToInt32(imageWidth * 0.01);</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span>//le sumo un 1%</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span>y = y + heigthPer;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\"><span style=\"white-space:pre\"> </span>x = x + heigthPer;</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">}</div>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2009-11-13T11:12:24.697-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "256888",
    "ThreadId": "74475",
    "Html": "<p>great! ;}</p>",
    "PostedDate": "2009-11-13T11:15:47.417-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]