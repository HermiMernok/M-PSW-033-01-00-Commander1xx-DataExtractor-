[
  {
    "Id": "637084",
    "ThreadId": "263839",
    "Html": "<p>Guys,</p>\n<p>Nice work on the API, I really like it.&nbsp;</p>\n<p>One question, do you have a simple reverse method for&nbsp;PixelToGeographic, that will</p>\n<p>give me teh X,Y on a static image for a given latitude &amp; longitude ?</p>\n<p>or is simple (linear) to calculate from the zoom level &amp; map corner position?</p>\n<p>I Really appreciate your help,</p>\n<p>thanks,</p>\n<p>Ronan</p>",
    "PostedDate": "2011-07-04T08:58:17.29-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "637110",
    "ThreadId": "263839",
    "Html": "<p>You are looking for this:</p>\r\n<pre>Geographic geo = new Geographic(8L, 50L);\r\nint zoom = 18;\r\nMapService.Info.MapServer server = MapService.Info.MapServer.GoogleMaps;\r\n\r\n// Create MapService instance\r\nMapService map = new MapService(geo, zoom, server);\r\n\r\n// Get pixel position on the satellite image\r\nint pixelX = map.TileInfo.GeoPosition.X;\r\nint pixelY = map.TileInfo.GeoPosition.Y;</pre>\r\n<p><br />Geoutility</p>",
    "PostedDate": "2011-07-04T10:32:51.863-07:00",
    "UserRole": "Owner",
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "637115",
    "ThreadId": "263839",
    "Html": "<p>&nbsp;</p>\r\n<p>Apologies I probably&nbsp;wasn't&nbsp;very clear, I already have a map that contains some point, as in:&nbsp;</p>\r\n<pre>Geographic geo = new Geographic(52.827354, -6.25242); // or whatever\r\nint zoom = 18;\r\nMapService.Info.MapServer server = MapService.Info.MapServer.GoogleMaps;\r\n\r\n// Create MapService instance\r\nMapService map = new MapService(geo, zoom, server);</pre>\r\n<pre><br /></pre>\r\n<pre>// and i get the associated image from </pre>\r\n<pre><pre>Image image = map.Images.Load();</pre>\r\nNow, say I have another point discovered in some other process:</pre>\r\n<pre><br /></pre>\r\n<pre>Geographic geo2 = new Geographic(52.34527354, -6.1342242); // or whatever</pre>\r\n<pre><br /></pre>\r\n<pre>Is there a simple way of working out the relationship between the bounds of the image and the</pre>\r\n<pre>geo2? I can see the various fields in map.TileInfo.Dimension and map.TileInfo.GeoPosition,</pre>\r\n<pre>but I have no reference to know exactly what these are or when they are set etc.</pre>\r\n<pre><br /></pre>\r\n<pre>I've tried working out the reference of the corners and calculating the X &amp; Y distance to geo2 and so forth,&nbsp;</pre>\r\n<pre>and I've looked through the sourcecode but I'm still not sure or getting reliable results,&nbsp;</pre>\r\n<pre>so I think it better to ask the authors :-)</pre>\r\n<pre><pre><br /></pre>\r\n<pre><br /></pre>\r\n<br /></pre>",
    "PostedDate": "2011-07-04T11:00:13.047-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "637160",
    "ThreadId": "263839",
    "Html": "<p>You wrote: \"... Is there a simple way of working out the relationship between the bounds of the image and the geo2?\"<br />What do you mean with 'relationship' exactly? Are you trying to find out if this coordinate (geo2)&nbsp;is <strong>on </strong>that image&nbsp;(true/false)&nbsp;or <strong>where </strong>it is (x, y) or something else?</p>\n<p>If you have a satellite&nbsp;image (which means there is an underlying MapService-Object) and you want to calculate something with a second coordinate (e. g. geo2), this second coordinate must be within the bounds of the MapService-Object or otherwise calculations are likely to fail. So the first thing is to check, if geo2 is on that image (MapService-Object).&nbsp; Here is a little example code:</p>\n<div style=\"background-color: white; color: black;\">\n<pre>            Geographic geo = <span style=\"color: blue;\">new</span> Geographic(52.827354, -6.25242);\r\n            <span style=\"color: blue;\">int</span> zoom = 18;\r\n            MapService.Info.MapServer server = MapService.Info.MapServer.GoogleMaps;\r\n            \r\n            <span style=\"color: green;\">// Create MapService instance</span>\r\n            MapService map = <span style=\"color: blue;\">new</span> MapService(geo, zoom, server);\r\n\r\n            <span style=\"color: green;\">// second coordinate</span>\r\n            Geographic geo2 = <span style=\"color: blue;\">new</span> Geographic(52.34527354, -6.1342242);\r\n\r\n            <span style=\"color: green;\">// Is the second coordinate within the bounds of the first image (MapService-Object)?</span>\r\n            <span style=\"color: green;\">// This is necessary or further calculations will most likly fail</span>\r\n            <span style=\"color: blue;\">if</span> (map.CoordsOnSameTile(geo2))\r\n            {\r\n                <span style=\"color: blue;\">const</span> <span style=\"color: blue;\">int</span> IMAGE_SIZE = 256;\r\n\r\n                GeoUtility.GeoSystem.Helper.GeoRect rect = map.TileInfo.Dimension;\r\n                <span style=\"color: green;\">// coordinate of the lower left corner of the image</span>\r\n                <span style=\"color: blue;\">double</span> lon = rect.Longitude;\r\n                <span style=\"color: blue;\">double</span> lat = rect.Latitude;\r\n\r\n                <span style=\"color: green;\">// coordinate of the image center</span>\r\n                <span style=\"color: blue;\">double</span> loncenter = rect.LonCenter;\r\n                <span style=\"color: blue;\">double</span> latcenter = rect.LatCenter;\r\n\r\n                <span style=\"color: green;\">// width and height of the image at this special zoom level</span>\r\n                <span style=\"color: green;\">// which is also the distance to neighboring images</span>\r\n                <span style=\"color: blue;\">double</span> width = rect.Width;\r\n                <span style=\"color: blue;\">double</span> height = rect.Height;\r\n\r\n                <span style=\"color: green;\">// Example: calculate the width of a pixel</span>\r\n                <span style=\"color: blue;\">double</span> pixelwidth = width / IMAGE_SIZE;\r\n                <span style=\"color: blue;\">double</span> pixelheight = height / IMAGE_SIZE;\r\n\r\n                <span style=\"color: green;\">// Do some other stuff ...</span>\r\n                <span style=\"color: green;\">// GeoUtility.GeoSystem.Helper.GeoPoint point1 = map.TileInfo.GeoPosition;</span>\r\n                <span style=\"color: green;\">// MapService map2 = map.MemberwiseClone();</span>\r\n                <span style=\"color: green;\">// map2.Geo = geo2;</span> \r\n                <span style=\"color: green;\">// GeoUtility.GeoSystem.Helper.GeoPoint point2 = map2.TileInfo.GeoPosition;</span>\r\n                <span style=\"color: green;\">// e. g. simple math calculations (trigonometry, etc)</span>\r\n            }\r\n            <span style=\"color: blue;\">else</span>\r\n            {\r\n                <span style=\"color: green;\">// bigmap (image) now holds both coordinates</span>\r\n                MapService bigmap = <span style=\"color: blue;\">new</span> MapService(map.CalculateCommonTile(geo2));\r\n\r\n                <span style=\"color: green;\">// Set coodinate on the MapService-Object (bigmap) to geo and get</span>\r\n                <span style=\"color: green;\">// X/Y of first coordinate (geo) on the new image </span>\r\n                bigmap.Geo = geo;\r\n                GeoUtility.GeoSystem.Helper.GeoPoint point1 = bigmap.TileInfo.GeoPosition;\r\n\r\n                <span style=\"color: green;\">// X/Y of second coordinate (geo2) on the new image </span>\r\n                bigmap.Geo = geo2;\r\n                GeoUtility.GeoSystem.Helper.GeoPoint point2 = bigmap.TileInfo.GeoPosition;\r\n\r\n                <span style=\"color: green;\">// Do some stuff ...</span>\r\n                <span style=\"color: green;\">// e. g. simple math calculations (trigonometry, etc)</span>\r\n            }\r\n</pre>\n</div>\n<p>Geoutility</p>",
    "PostedDate": "2011-07-04T13:33:01.507-07:00",
    "UserRole": "Owner",
    "MarkedAsAnswerDate": null
  }
]